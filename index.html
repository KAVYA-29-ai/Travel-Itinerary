# index.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Itinerary Generator — Netlify · Gemini · Google Maps</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <meta name="description" content="Generate beautiful travel itineraries with pins on Google Maps using Google AI Studio (Gemini). Pure frontend, Netlify-ready." />
</head>
<body>
  <header class="app-header glow">
    <div class="brand">
      <div class="logo">🧭</div>
      <div class="title">
        <h1>AI Travel Itinerary</h1>
        <p>Netlify · Google AI Studio (Gemini) · Google Maps</p>
      </div>
    </div>
    <a class="badge" href="#setup">Setup Guide ↓</a>
  </header>

  <main class="layout">
    <section class="left">
      <form id="trip-form" class="card enter-up" autocomplete="off">
        <div class="row two">
          <div class="field">
            <label for="city">City</label>
            <input id="city" placeholder="e.g., Jaipur" required />
          </div>
          <div class="field">
            <label for="budget">Budget (INR)</label>
            <input id="budget" type="number" min="0" placeholder="e.g., 15000" required />
          </div>
        </div>

        <div class="row two">
          <div class="field">
            <label for="days">Days</label>
            <input id="days" type="number" min="1" max="14" value="3" required />
          </div>
          <div class="field">
            <label for="preferences">Preferences</label>
            <input id="preferences" placeholder="e.g., history, street food, markets" />
          </div>
        </div>

        <div class="row two">
          <div class="field">
            <label for="geminiKey">Gemini API Key</label>
            <input id="geminiKey" placeholder="Paste Google AI Studio key" />
          </div>
          <div class="field">
            <label for="mapsKey">Google Maps API Key</label>
            <input id="mapsKey" placeholder="Paste Google Maps key" />
          </div>
        </div>

        <div class="actions">
          <button id="generateBtn" type="submit" class="btn-primary">Generate Itinerary</button>
          <button id="clearBtn" type="button" class="btn-ghost">Clear</button>
        </div>
        <p class="hint">Keys are used only in your browser. For security, restrict your Maps key by HTTP referrer to your Netlify domain.</p>
      </form>

      <section id="output" class="stack"></section>
    </section>

    <section class="right">
      <div id="map" class="map card enter-up"></div>
      <div id="map-status" class="map-status">Map is ready. Pins will appear after generation.</div>
    </section>
  </main>

  <footer class="footer">
    <span>Built for speed — Pure Frontend • Deployed on Netlify • © contributors</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
```

---

# style.css

```css
:root{
  --bg:#090e1a;           /* deep night */
  --panel:#0f1730;        /* glass panel */
  --ink:#eaf1ff;          /* main text */
  --muted:#9aa6c7;        /* secondary */
  --brand:#7ae1ff;        /* cyan */
  --brand2:#a78bfa;       /* purple */
  --ok:#4ade80;           /* green */
  --err:#ff6b95;          /* red */
  --bd:#1a2347;           /* border */
  --shadow:0 18px 50px rgba(0,0,0,.4);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--ink);
  background:
    radial-gradient(1200px 800px at -10% -10%, rgba(122,225,255,.12), transparent 60%),
    radial-gradient(1000px 700px at 120% -20%, rgba(167,139,250,.12), transparent 60%),
    linear-gradient(#070b16,#0a1020);
}

/* Header */
.app-header{
  position:sticky;top:0;z-index:10;
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 18px;border-bottom:1px solid var(--bd);
  background:linear-gradient(180deg, rgba(10,16,32,.9), rgba(10,16,32,.6));
  backdrop-filter:saturate(140%) blur(8px);
}
.brand{display:flex;gap:12px;align-items:center}
.logo{font-size:28px;filter:drop-shadow(0 3px 10px rgba(122,225,255,.3))}
.title h1{margin:0;font-size:22px;letter-spacing:.2px}
.title p{margin:2px 0 0;color:var(--muted);font-size:13px}
.badge{color:var(--bg);background:linear-gradient(135deg,var(--brand),var(--brand2));
  padding:8px 12px;border-radius:999px;text-decoration:none;font-weight:800}
.badge:hover{opacity:.9}

/* Layout */
.layout{display:grid;grid-template-columns:1.2fr 1fr;gap:14px;padding:14px;min-height:calc(100vh - 80px)}
.left{overflow:auto;padding-right:6px}
.right{display:flex;flex-direction:column;gap:10px}

/* Cards & form */
.card{background:linear-gradient(180deg, rgba(21,30,66,.7), rgba(17,24,52,.9));
  border:1px solid var(--bd);border-radius:22px;padding:16px;box-shadow:var(--shadow)}
.row{display:grid;gap:12px}
.row.two{grid-template-columns:repeat(2,1fr)}
.field{display:flex;flex-direction:column;gap:6px}
label{font-size:12px;color:var(--muted)}
input{background:#0b1230;border:1px solid var(--bd);color:var(--ink);padding:12px 14px;border-radius:14px;outline:none}
input:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(122,225,255,.15)}

.actions{display:flex;gap:10px;margin-top:10px}
.btn-primary{appearance:none;border:0;cursor:pointer;color:#061028;font-weight:800;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  border-radius:14px;padding:12px 16px;transition:transform .15s ease, filter .2s}
.btn-primary:hover{transform:translateY(-1px);filter:saturate(110%)}
.btn-primary:disabled{opacity:.7;cursor:progress}
.btn-ghost{appearance:none;border:1px solid var(--bd);background:#0b1230;color:var(--ink);padding:12px 16px;border-radius:14px}
.hint{margin:8px 2px 0;color:var(--muted);font-size:12px}

/* Output */
.stack{display:flex;flex-direction:column;gap:12px;margin-top:12px}
.summary{border-left:4px solid var(--brand)}
.day{border-left:4px solid var(--brand2)}
.details{background:#0b1230;border:1px dashed var(--bd);border-radius:14px;padding:10px;margin-top:10px}
.details h4{margin:6px 0;font-size:13px;color:var(--brand)}
.item{display:grid;grid-template-columns:28px 1fr;gap:10px;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.05)}
.item:last-child{border-bottom:0}
.item .bullet{font-size:18px}
.meta{color:var(--muted);font-size:12px}

/* Map */
.map{min-height:380px;height:100%;border-radius:22px;border:1px solid var(--bd)}
.map-status{font-size:12px;color:var(--muted);margin-left:6px}

/* Collapsibles */
details{background:#0b1230;border:1px solid var(--bd);border-radius:14px;padding:8px 10px}
details>summary{cursor:pointer;font-weight:700}
details[open]{border-color:var(--brand2)}

/* Footer */
.footer{border-top:1px solid var(--bd);padding:12px 16px;color:var(--muted);font-size:12px}

/* Animations */
.enter-up{opacity:0;transform:translateY(10px);animation:enter .5s ease forwards}
.card:hover{transition:box-shadow .25s ease, transform .2s ease;transform:translateY(-1px)}
@keyframes enter{to{opacity:1;transform:none}}
.glow{box-shadow:0 0 0 0 rgba(122,225,255,.4);animation:glow 3s ease infinite}
@keyframes glow{0%,100%{box-shadow:0 0 0 0 rgba(122,225,255,.15)}50%{box-shadow:0 0 40px 0 rgba(122,225,255,.25)}}

/* Responsive */
@media (max-width: 980px){
  .layout{grid-template-columns:1fr}
  .right{order:-1}
  .row.two{grid-template-columns:1fr}
}
```

---

# app.js

```javascript
/*
  Netlify-ready • Pure Frontend • Gemini + Google Maps Pins
  - Strict JSON schema
  - 2-step prompt: generate → validate
  - Dynamic Google Maps SDK load from user's key
*/

// ====== Global ======
let MAP = null, BOUNDS = null, GEOCODER = null;
let GEMINI_KEY = '', MAPS_KEY = '';

const form = document.getElementById('trip-form');
const output = document.getElementById('output');
const generateBtn = document.getElementById('generateBtn');
const clearBtn = document.getElementById('clearBtn');
const mapStatus = document.getElementById('map-status');

// ====== Helpers ======
function el(tag, cls, html){ const e = document.createElement(tag); if(cls) e.className = cls; if(html!==undefined) e.innerHTML = html; return e; }
function setLoading(v){ generateBtn.disabled = v; generateBtn.textContent = v ? 'Generating…' : 'Generate Itinerary'; }
function escapeHTML(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

// Safe JSON parse
function safeParseJSON(text){
  const m = text.match(/\{[\s\S]*\}$/); const c = m?m[0]:text;
  try{ return JSON.parse(c); }catch{
    let f = c.replace(/\r\n/g,'\n').replace(/\t/g,' ').replace(/,\s*([}\]])/g,'$1').replace(/\'(.*?)\'/g,'"$1"');
    return JSON.parse(f);
  }
}

function validateSchema(obj){
  if(!obj || typeof obj!=='object') throw new Error('Invalid JSON');
  if(typeof obj.summary!== 'string') throw new Error('Missing "summary"');
  if(!Array.isArray(obj.days)) throw new Error('Missing "days" array');
  obj.days.forEach((d,i)=>{
    if(typeof d.day !== 'number') throw new Error(`Day ${i+1}: field "day" must be number`);
    if(typeof d.title !== 'string') throw new Error(`Day ${i+1}: field "title" required`);
    if(!Array.isArray(d.activities)) throw new Error(`Day ${i+1}: activities[] required`);
    d.activities.forEach((a,j)=>{
      if(!(a && typeof a.place==='string' && typeof a.description==='string' && typeof a.map_query==='string'))
        throw new Error(`Day ${i+1} Activity ${j+1}: {place, description, map_query} required`);
    });
    if(!Array.isArray(d.dining)) throw new Error(`Day ${i+1}: dining[] required`);
    d.dining.forEach((r,k)=>{
      if(!(r && typeof r.restaurant==='string' && typeof r.cuisine==='string' && typeof r.map_query==='string'))
        throw new Error(`Day ${i+1} Dining ${k+1}: {restaurant, cuisine, map_query} required`);
    });
  });
  return obj;
}

// ====== Google Maps Loader ======
function loadGoogleMaps(key){
  return new Promise((resolve, reject)=>{
    if(window.google && window.google.maps) return resolve();
    const cb = '__onGMapReady_' + Math.random().toString(36).slice(2);
    window[cb] = ()=> resolve();
    const s = document.createElement('script');
    s.src = `https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(key)}&libraries=places&callback=${cb}`;
    s.async = true; s.onerror = ()=> reject(new Error('Failed to load Google Maps'));
    document.head.appendChild(s);
  });
}

function initMap(){
  if(!window.google || !window.google.maps) throw new Error('Google Maps SDK not loaded');
  MAP = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 20.5937, lng: 78.9629 }, // India
    zoom: 5,
    mapId: 'DEMO_MAP_ID' // optional if you have a styled map id
  });
  BOUNDS = new google.maps.LatLngBounds();
  GEOCODER = new google.maps.Geocoder();
}

async function geocodeAddress(address){
  return new Promise((resolve)=>{
    GEOCODER.geocode({ address }, (results, status)=>{
      if(status === 'OK' && results && results[0]){
        const loc = results[0].geometry.location;
        resolve({ lat: loc.lat(), lng: loc.lng(), formatted: results[0].formatted_address });
      } else resolve(null);
    });
  });
}

async function plotPins(items){
  mapStatus.textContent = 'Placing pins…';
  let count = 0;
  for(const it of items){
    try{
      const g = await geocodeAddress(it.query);
      if(g){
        const marker = new google.maps.Marker({
          map: MAP,
          position: { lat: g.lat, lng: g.lng },
          title: it.title,
          icon: it.type === 'dining'
            ? { url: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png' }
            : { url: 'https://maps.google.com/mapfiles/ms/icons/red-dot.png' }
        });
        const info = new google.maps.InfoWindow({ content: `<strong>${escapeHTML(it.title)}</strong><div class="meta">${escapeHTML(g.formatted)}</div>` });
        marker.addListener('click', ()=> info.open({ anchor: marker, map: MAP }));
        BOUNDS.extend(marker.getPosition());
        count++;
        await new Promise(r=>setTimeout(r, 120)); // gentle pacing
      }
    }catch(err){ console.warn('Geocode failed', it, err); }
  }
  if(count) MAP.fitBounds(BOUNDS, { padding: 40 });
  mapStatus.textContent = count ? `Placed ${count} pins.` : 'No pins placed (addresses not found).';
}

// ====== Prompting (Gemini) ======
function buildSystemPrompt(city, budget, days, prefs){
  return `You are an expert travel planner. City: ${city}. Budget: INR ${budget}. Days: ${days}. Preferences: ${prefs}.`;
}
function buildUserPrompt_JSON(city, budget, days, prefs){
  return `Return ONLY valid JSON matching this exact schema (no comments):\n\n{\n  "summary": "trip overview",\n  "days": [\n    {\n      "day": 1,\n      "title": "Day title",\n      "activities": [\n        {"place": "Place name", "description": "Short desc", "map_query": "search string"}\n      ],\n      "dining": [\n        {"restaurant": "Restaurant name", "cuisine": "Type", "map_query": "search string"}\n      ]\n    }\n  ]\n}\n\nRules:\n- days must equal ${days}.\n- activities: 3–5 per day; dining: 1–2 per day.\n- map_query must be concise & include the city name for Google Maps geocoding.\n- Optimize for budget INR ${budget} and preferences: ${prefs}.\n- Ensure strictly valid JSON.`;
}
function buildRefinePrompt(rawJSON){
  return `Validate and minimally fix this itinerary so it matches the schema exactly.\nEvery activity must have {place, description, map_query}. Every dining item must have {restaurant, cuisine, map_query}.\nReturn ONLY the final JSON.\n\nItinerary JSON to validate:\n${rawJSON}`;
}

async function callGemini(systemPrompt, userPrompt){
  const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${encodeURIComponent(GEMINI_KEY)}`;
  const body = { contents:[ { role:'user', parts:[ { text: `${systemPrompt}\n\n${userPrompt}` } ] } ] };
  const res = await fetch(url, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify(body) });
  if(!res.ok){ throw new Error(`Gemini error ${res.status}: ${await res.text()}`); }
  const data = await res.json();
  const text = data?.candidates?.[0]?.content?.parts?.[0]?.text || '';
  if(!text) throw new Error('Empty response from Gemini');
  return text;
}

async function generateItinerary(city, budget, days, prefs){
  const systemPrompt = buildSystemPrompt(city, budget, days, prefs);
  const p1 = buildUserPrompt_JSON(city, budget, days, prefs);
  const t1 = await callGemini(systemPrompt, p1);
  const j1 = safeParseJSON(t1);
  const refine = buildRefinePrompt(JSON.stringify(j1, null, 2));
  const t2 = await callGemini('You are a strict JSON validator.', refine);
  const obj = validateSchema(safeParseJSON(t2));
  return obj;
}

// ====== Rendering ======
function renderItinerary(data){
  output.innerHTML = '';
  const summary = el('div','card summary enter-up');
  summary.innerHTML = `<h2>Trip Summary</h2><p>${escapeHTML(data.summary)}</p>`;
  output.appendChild(summary);

  data.days.forEach(d=>{
    const dayCard = el('div','card day enter-up');
    const details = document.createElement('details');
    const sum = document.createElement('summary');
    sum.textContent = `Day ${d.day} — ${d.title}`;
    details.appendChild(sum);

    const activities = el('div','details'); activities.innerHTML = '<h4>Activities</h4>';
    d.activities.forEach(a=>{
      const item = el('div','item');
      item.innerHTML = `<div class="bullet">📍</div><div><div><strong>${escapeHTML(a.place)}</strong></div><div class="meta">${escapeHTML(a.description)}</div><div class="meta">Query: <code>${escapeHTML(a.map_query)}</code></div></div>`;
      activities.appendChild(item);
    });

    const dining = el('div','details'); dining.innerHTML = '<h4>Dining</h4>';
    d.dining.forEach(r=>{
      const item = el('div','item');
      item.innerHTML = `<div class="bullet">🍽️</div><div><div><strong>${escapeHTML(r.restaurant)}</strong> — ${escapeHTML(r.cuisine)}</div><div class="meta">Query: <code>${escapeHTML(r.map_query)}</code></div></div>`;
      dining.appendChild(item);
    });

    details.appendChild(activities);
    details.appendChild(dining);
    dayCard.appendChild(details);
    output.appendChild(dayCard);
  });
}

// ====== Events ======
form.addEventListener('submit', async (e)=>{
  e.preventDefault(); setLoading(true); output.innerHTML='';
  const city = document.getElementById('city').value.trim();
  const budget = Number(document.getElementById('budget').value || '0');
  const days = Number(document.getElementById('days').value || '1');
  const prefs = document.getElementById('preferences').value.trim() || 'general sightseeing';
  GEMINI_KEY = document.getElementById('geminiKey').value.trim();
  MAPS_KEY = document.getElementById('mapsKey').value.trim();

  if(!GEMINI_KEY){ setLoading(false); alert('Please paste your Gemini API key.'); return; }
  if(!MAPS_KEY){ setLoading(false); alert('Please paste your Google Maps API key.'); return; }

  try{
    await loadGoogleMaps(MAPS_KEY);
    initMap();

    const data = await generateItinerary(city, budget, days, prefs);
    renderItinerary(data);

    const items = [];
    data.days.forEach(d=>{
      d.activities.forEach(a=> items.push({ title:a.place, query: a.map_query, type:'activity' }));
      d.dining.forEach(r=> items.push({ title:r.restaurant, query: r.map_query, type:'dining' }));
    });
    await plotPins(items);
  }catch(err){
    console.error(err);
    output.innerHTML = `<div class="card" style="border-left:4px solid var(--err)"><h2>Oops, something went wrong</h2><p>${escapeHTML(err.message)}</p><p class="meta">Tip: Ensure both API keys are valid and Maps APIs (Maps JavaScript + Geocoding) are enabled.</p></div>`;
    mapStatus.textContent = 'Error. Check console for details.';
  }finally{ setLoading(false); }
});

clearBtn.addEventListener('click', ()=>{
  form.reset(); output.innerHTML=''; mapStatus.textContent='Map is ready. Pins will appear after generation.';
  if(MAP) MAP.setCenter({lat:20.5937,lng:78.9629}), MAP.setZoom(5);
});
```

---

# Setup Guide (Netlify + GitHub)

1. **Create a GitHub repo** and add these 3 files (`index.html`, `style.css`, `app.js`).

2. **Enable Google APIs**

   * Go to Google Cloud Console → APIs & Services.
   * Create an API key and **restrict** it by HTTP referrer to your Netlify domain (e.g., `https://your-site.netlify.app/*`).
   * Enable **Maps JavaScript API** and **Geocoding API**.
   * Copy the key → this goes into the app’s *Google Maps API Key* input.

3. **Create Gemini API key**

   * Go to **Google AI Studio** → create an API key.
   * Copy the key → this goes into the app’s *Gemini API Key* input.

4. **Deploy on Netlify**

   * Netlify dashboard → *Add new site* → *Import from Git* → connect GitHub → select repo.
   * Since this is pure static, **no build command** needed. Publish directory = root.
   * Deploy → you get `https://your-site.netlify.app`.

5. **Use the App**

   * Open your site. Paste both keys in the form. Fill city/budget/days/preferences. Click **Generate Itinerary**.
   * The app fetches JSON from Gemini, renders gorgeous cards with animations, and drops pins on Google Maps via geocoding.

6. **Notes**

   * Keys are **not stored** on any server. They stay in your browser memory for this session.
   * If you see geocoding quota or CORS issues, verify APIs are enabled and referrer restrictions are correct.

Enjoy your God‑level UI with smooth animations, responsive layout, and live pins 🗺️✨
